<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">

     /* Always set the map height explicitly to define the size of the div
         * element that contains the map. */
        #map {
            height: 100%;
            width: 100%;
        }
        /* Optional: Makes the sample page fill the window. */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }

    </style>
    <script type="text/javascript"
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBHdir5sJIaAL05vrd19bBn6CkmWAqcBi8&libraries=visualization">
    </script>
    <script type="text/javascript">
	var map;
	var heatmap;
	var Abridge;

        function initialize() {
            console.log("map analytic js");
	  
			//Sets options for the map to be made
            var mapOptions = {
                center: new google.maps.LatLng(40.7128, -74.0059),
				zoom: 8,
				disableDefaultUI: true,
				mapTypeId: google.maps.MapTypeId.ROADMAP
			};
		
			//Creates the map object and displays it
			map = new google.maps.Map(document.getElementById("map_canvas"),
				mapOptions);
				console.log("javascript console");
		}


        function loadHeat(datagroup)
        {
            console.log("heatmap");
            var points = Abridge.getPointsJS(datagroup.toString());
			console.log("heatmap2");
            var heatMapPoints = [];
            for(var i = 0; i < points.size(); i++)
            {
                var point = points.get(i);
                heatMapPoints.push(new google.maps.LatLng(point.getLat(), point.getLon()));
            }
			console.log("heatmap3");

            heatmap = new google.maps.visualization.HeatmapLayer({
            data: heatMapPoints,
            map: map
            });
        }

		
		var jsConnector = {
			showResult: function (result) {
			document.getElementById('result').innerHTML = result;
			}
		
		};
		
		function getJsConnector() {
		return jsConnector;
		}
 

    </script>
</head>
<body onload="initialize()">
<div id="map_canvas" style="width:100%; height:100%"></div>
</body>
</html>